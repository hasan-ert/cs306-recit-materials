CREATE TABLE employee(
	SSN INT,
    NAME VARCHAR(20),
    BDATE DATE,
    ADDRESS VARCHAR(50),
    SALARY DECIMAL,
    SUPERSSN INT,
    DNO INT,
    PRIMARY KEY (SSN),
    FOREIGN KEY (SUPERSSN) REFERENCES EMPLOYEE(SSN) ON UPDATE CASCADE ON DELETE SET NULL
);

CREATE TABLE department(
	DNUMBER INT,
    DNAME VARCHAR(20),
    MGRSSN INT,
    MGRSTARTDATE DATE,
    PRIMARY KEY (DNUMBER),
    FOREIGN KEY (MGRSSN) REFERENCES EMPLOYEE(SSN) ON DELETE SET NULL
);

ALTER TABLE `recit-6`.`employee` 
ADD CONSTRAINT `employee_ibfk_2`
  FOREIGN KEY (`DNO`)
  REFERENCES DEPARTMENT(`DNUMBER`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;
  
  
INSERT INTO EMPLOYEE VALUES (1234,"John","1993-3-12","London",25000,null,null);
INSERT INTO EMPLOYEE VALUES (5231,"Smith","1995-7-3","Berlin",15000,null,null);
INSERT INTO EMPLOYEE VALUES (3342,"Dustin","1994-5-25","New York",32000,null,null);
INSERT INTO EMPLOYEE VALUES (2131,"Britney","1989-3-6","Izmir",18550,null,4);
INSERT INTO EMPLOYEE VALUES (5743,"Alper","1950-10-12","Konya",45000,null,null);
INSERT INTO EMPLOYEE VALUES ('1555', 'Don', '1995-03-03', 'Lisbon', '41000', '5743', '5');
INSERT INTO EMPLOYEE VALUES ('2332', 'Mary', '1990-06-12', 'Lisbon', '32000', '5');
INSERT INTO EMPLOYEE VALUES ('4303', 'Gabriel', '1987-12-10', 'France', '50000', '5');
INSERT INTO EMPLOYEE VALUES ('3503', 'Hasan', '1998-1-1', 'Izmir', '27000', '5743', '5');

INSERT INTO DEPARTMENT VALUES (1,"Marketing",1234,"2012-1-1");
INSERT INTO DEPARTMENT VALUES (2,"Sales",5231,"2015-1-1");
INSERT INTO DEPARTMENT VALUES (3,"HR",5231,"2017-1-1");
INSERT INTO DEPARTMENT VALUES (4,"IT",2131,"2016-1-1");
INSERT INTO DEPARTMENT VALUES (5,"RESEARCH",5743,"2013-1-1");

CREATE TABLE DEPT_LOCATIONS(
	DNUMBER INT,
    DLOCATION VARCHAR(20),
    PRIMARY KEY (DNUMBER,DLOCATION),
    FOREIGN KEY (DNUMBER) REFERENCES DEPARTMENT(DNUMBER) ON DELETE CASCADE
);  

INSERT INTO DEPT_LOCATIONS VALUES (1,"Izmir");
INSERT INTO DEPT_LOCATIONS VALUES (1,"New York");
INSERT INTO DEPT_LOCATIONS VALUES (2,"New York");
INSERT INTO DEPT_LOCATIONS VALUES (3,"New York");
INSERT INTO DEPT_LOCATIONS VALUES (3,"London");
INSERT INTO DEPT_LOCATIONS VALUES (3,"Berlin");
INSERT INTO DEPT_LOCATIONS VALUES (4,"London");
INSERT INTO DEPT_LOCATIONS VALUES (5,"Berlin");

CREATE TABLE project(
	PNUMBER INT auto_increment,
    PNAME VARCHAR(50),
    PLOCATION VARCHAR(50),
    DNUM INT,
    Primary Key (PNUMBER),
    Foreign Key (DNUM) REFERENCES DEPARTMENT(DNUMBER) ON DELETE SET NULL
);

INSERT INTO PROJECT VALUES (111,"Satellite Project","London",4);
INSERT INTO PROJECT VALUES (213,"Developing an electric motor","New York",2);
INSERT INTO PROJECT VALUES (374,"Death Star","Berlin",3);
INSERT INTO PROJECT VALUES (163,"Cloning","Izmir",1);
INSERT INTO PROJECT VALUES (555,"Perfect Omlette","Berlin",5);
INSERT INTO PROJECT VALUES (666,"Super Conductors","Berlin",5);
INSERT INTO PROJECT VALUES (532,"Project X","Izmir",1);
INSERT INTO PROJECT VALUES (893,"Gustav Gun","Berlin",3);
INSERT INTO PROJECT VALUES (293,"Phone Battery","London",4);
INSERT INTO PROJECT VALUES (902,"Solar Panel","New York",3);

CREATE TABLE WORKSON (
	ESSN INT,
    PNO INT,
    HOURS DECIMAL,
    Primary key (ESSN,PNO),
    FOREIGN KEY (ESSN) REFERENCES EMPLOYEE(SSN) ON DELETE CASCADE,
    FOREIGN KEY (PNO) REFERENCES PROJECT(PNUMBER) ON DELETE CASCADE
);

INSERT INTO WORKSON VALUES (1234,902,50),  (1234,213,50),  (1234,163,50),  (1234,532,50),
(5231,213,150), 
 (5231,555,30),  (5231,666,56),  (3342,555,50),  (3342,893,10), 
 (3342,163,37) , (3342,374,30) , (2131,555,70) , (2131,666,25),
 (2131,902,10) , (5743,374,500);




CREATE TABLE DEPENDENT (
	ESSN INT,
    DEPENDENT_NAME VARCHAR(50),
    SEX VARCHAR(10),
    BDATE DATE,
    RELATIONSHIP VARCHAR(20),
    Primary key (ESSN,DEPENDENT_NAME),
    FOREIGN KEY (ESSN) REFERENCES EMPLOYEE(SSN) ON DELETE CASCADE
);


INSERT INTO DEPENDENT VALUES (1234,"Emily","Female","1995-3-3","Wife"),  (1234,"Jake","Male","2016-3-3","Child"), (1234,"John","Male","2017-3-3","Child") ,
(1234,"Jacquelin","Female","2018-3-3","Child"), (1234,"Larry","Male","2019-3-3","Child"), (1234,"Monica","Female","2020-3-3","Child"), (1234,"Derek","Male","2022-3-3","Child"),
(5231,"Jane","Female","1999-3-3","Wife"),  (5231,"Daphne","Female","2017-5-13","Child"),
(3342,"Mary","Female","1996-3-3","Wife"),  (2131,"Henry","Male","2018-3-3","Husband"),
(5743,"Scarlett","Female","1953-3-3","Wife"),  (5743,"John","Male","1978-3-3","Child"), (5743,"Emily","Female","2005-3-3","Grandchild");


DELETE FROM DEPENDENT
